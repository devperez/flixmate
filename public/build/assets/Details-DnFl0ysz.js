import{k as u,h as Z,p as V,c as z,w as N,l as c,o as n,f as i,b as t,t as l,F as b,s as C,g as p,d as h,i as A,q}from"./app-UflIzx5p.js";import{A as F}from"./AuthenticatedLayout-C_T42wHi.js";import{_ as P}from"./ShareListModal-CEUuaQvX.js";/* empty css            */import"./ApplicationLogo-BEQ8lapF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={key:0,class:"flex flex-col items-center space-y-4 p-6 bg-white rounded-lg shadow"},G={class:"flex flex-wrap items-center space-x-2"},H={class:"text-2xl font-bold text-gray-800"},K={class:"text-lg italic text-center text-gray-500"},ee={key:1,class:"flex flex-col items-center space-y-4 p-6 bg-white rounded-lg shadow"},te={class:"flex flex-wrap items-center justify-center space-x-2"},se={class:"text-2xl font-bold text-gray-800"},oe={class:"text-lg italic text-center text-gray-500"},re={class:"py-12"},le={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-3 gap-6"},ae={key:0,class:"text-gray-900 p-6 bg-white rounded-lg md:col-span-1 shadow"},ne=["src"],ie={class:"py-2"},de={key:1,class:"text-gray-900 p-6 bg-white rounded-lg md:col-span-1 shadow"},ue=["src"],ce={class:"py-2"},pe={class:"p-6 bg-white rounded-lg shadow md:col-span-2"},ve={class:"mt-6"},me={class:"flex items-center justify-between"},he=["onClick"],ge=["onClick"],ye={class:"flex-1 px-2"},xe={class:"flex items-center space-x-1"},fe=["onClick"],we=["onClick"],ze={__name:"Details",props:["id","type"],setup(Y){const w=Y,g=u(""),v=u([]),o=u(null),k=u([]),y=u(null),_=u(!1),r=u(null),I=u([]),M=u(null),O=Z(()=>I.value.map(s=>s.id)),D=async()=>{try{const e=await(await fetch(`https://api.themoviedb.org/3/tv/${w.id}`,{headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjMGQ1ZTJlNzUzMWY1MTRlMDI1YzIwNDQ3Y2I0N2Q3OCIsIm5iZiI6MTczNzQ1Nzg5OC42ODk5OTk4LCJzdWIiOiI2NzhmODBlYWY4N2Y0MTE5ZTZhYWFmNzkiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.2-txuO5P4dqyVq4il9ULMYMiHMRBD-8dXXD9HSQocUg"}})).json();o.value=e}catch(s){console.error("Erreur lors de la rÃ©cupÃ©ration des dÃ©tails de la sÃ©rie :",s)}},J=async()=>{try{const e=await(await fetch(`https://api.themoviedb.org/3/movie/${w.id}`,{headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjMGQ1ZTJlNzUzMWY1MTRlMDI1YzIwNDQ3Y2I0N2Q3OCIsIm5iZiI6MTczNzQ1Nzg5OC42ODk5OTk4LCJzdWIiOiI2NzhmODBlYWY4N2Y0MTE5ZTZhYWFmNzkiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.2-txuO5P4dqyVq4il9ULMYMiHMRBD-8dXXD9HSQocUg"}})).json();r.value=e}catch(s){console.error("Erreur lors de la rÃ©cupÃ©ration des dÃ©tails du film :",s)}},x=async()=>{try{const s=await c.get(route("lists.index"));v.value=s.data.lists.map(e=>({...e,showContacts:!1,selectedContacts:[]}))}catch(s){console.error("Erreur lors de la rÃ©cupÃ©ration des listes:",s)}},T=async()=>{try{const s=await c.get(route("contacts.connections"));k.value=s.data.activeConnections.map(e=>e.connected_user)}catch(s){console.error("Erreur lors de la rÃ©cupÃ©ration des connexions:",s)}},L=async()=>{if(g.value.trim()===""){alert("Veuillez entrer un nom de liste");return}try{const s=await c.post(route("lists.store"),{name:g.value});v.value.push({...s.data,showContacts:!1,selectedContacts:[]}),g.value=""}catch(s){console.error("Erreur lors de la crÃ©ation de la liste:",s)}},j=async s=>{if(o.value)try{await c.post(route("lists.add_movie",{list:s}),{tv_id:o.value.id,name:o.value.name,poster:o.value.poster_path,release:o.value.first_air_date,metadata:"tv"}),x(),alert(`"${o.value.name}" ajoutÃ© Ã  la liste !`)}catch(e){console.error("Erreur lors de l'ajout Ã  la liste:",e)}if(r.value)try{await c.post(route("lists.add_movie",{list:s}),{movie_id:r.value.id,title:r.value.title,poster:r.value.poster_path,release:r.value.release_date,metadata:"movie"}),x(),alert(`"${r.value.title}" ajoutÃ© Ã  la liste !`)}catch(e){console.error("Erreur lors de l'ajout Ã  la liste:",e)}},B=s=>{y.value=v.value[s].id,U(y.value),_.value=!0},E=()=>{_.value=!1,y.value=null},Q=()=>{x()},X=s=>!Array.isArray(s)||!o.value&&!r.value?!1:s.some(e=>{var d,a,f,m;return((d=e.movie)==null?void 0:d.tmdb_id)===((a=o.value)==null?void 0:a.id)||((f=e.movie)==null?void 0:f.tmdb_id)===((m=r.value)==null?void 0:m.id)}),S=s=>{let e=o.value;e||(e=r.value);try{c.delete(route("delete-movie",{list:s,movie:e.id})),x()}catch(d){console.error("Erreur lors de la suppression de la sÃ©rie de la liste:",d)}},U=async s=>{try{const e=await c.get(route("lists.sharedContacts",{listId:s}));I.value=e.data.sharedContacts}catch(e){console.error("Erreur lors de la rÃ©cupÃ©ration des contacts partagÃ©s:",e)}},$=async()=>{try{const s=await c.get(route("current-user"));M.value=s.data.id}catch(s){console.error("Erreur lors de la rÃ©cupÃ©ration de l'ID de l'utilisateur actuel:",s)}},W=async s=>{try{await c.delete(route("lists.destroy",{id:s})),v.value=v.value.filter(e=>e.id!==s)}catch(e){console.error("Erreur lors de la suppression de la liste:",e)}};return V(()=>{w.type==="tv"?D():J(),x(),T(),$()}),(s,e)=>(n(),z(F,null,{header:N(()=>[r.value?(n(),i("div",R,[t("div",G,[t("h1",H,l(r.value.title),1),(n(!0),i(b,null,C(r.value.genres,(d,a)=>(n(),i("span",{key:a,class:"text-sm font-medium text-gray-600 bg-gray-200 rounded-full px-3 py-1"},l(d.name),1))),128))]),t("div",K,' "'+l(r.value.tagline)+'" ',1)])):p("",!0),o.value?(n(),i("div",ee,[t("div",te,[t("h1",se,l(o.value.name),1),(n(!0),i(b,null,C(o.value.genres,(d,a)=>(n(),i("span",{key:a,class:"text-sm font-medium text-gray-600 bg-gray-200 rounded-full px-3 py-1"},l(d.name),1))),128))]),t("div",oe,' "'+l(o.value.tagline)+'" ',1)])):p("",!0)]),default:N(()=>{var d;return[t("div",re,[t("div",le,[o.value?(n(),i("div",ae,[o.value.poster_path?(n(),i("img",{key:0,src:`https://image.tmdb.org/t/p/w500${o.value.poster_path}`,alt:"TV Poster"},null,8,ne)):p("",!0),t("p",ie,l(o.value.overview),1),t("p",null,[e[1]||(e[1]=t("strong",null,"PremiÃ¨re diffusion:",-1)),h(" "+l(o.value.first_air_date),1)]),t("p",null,[e[2]||(e[2]=t("strong",null,"Nombre de saisons:",-1)),h(" "+l(o.value.number_of_seasons),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Nombre d'Ã©pisodes:",-1)),h(" "+l(o.value.number_of_episodes),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Statut:",-1)),h(" "+l(o.value.status),1)])])):p("",!0),r.value?(n(),i("div",de,[t("img",{src:`https://image.tmdb.org/t/p/w500${r.value.poster_path}`,alt:"Movie Poster"},null,8,ue),t("p",ce,l(r.value.overview),1),t("p",null,[e[5]||(e[5]=t("strong",null,"Sortie:",-1)),h(" "+l(r.value.release_date),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"DurÃ©e:",-1)),h(" "+l(r.value.runtime),1)])])):p("",!0),t("div",pe,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold mb-4"},"CrÃ©er une liste",-1)),A(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),type:"text",placeholder:"Nom de la liste",class:"w-full px-4 py-2 border rounded mb-2"},null,512),[[q,g.value]]),t("button",{onClick:L,class:"w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," CrÃ©er une nouvelle liste "),t("div",ve,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold mb-2"},"Mes listes",-1)),t("ul",null,[(n(!0),i(b,null,C(v.value,(a,f)=>(n(),i("li",{key:f,class:"flex flex-col border-b py-2"},[t("div",me,[t("button",{onClick:m=>W(a.id),class:"px-1 py-2 mx-1 bg-red-500 text-white rounded hover:bg-red-600"},e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1)]),8,he),t("button",{onClick:m=>B(f),class:"px-1 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})],-1)]),8,ge),t("span",ye,l(a.name),1),t("div",xe,[t("button",{onClick:m=>j(a.id),class:"bg-green-500 text-white px-1 py-2 rounded hover:bg-green-600"}," âž• Ajouter Ã  cette liste ",8,fe),X(a.items)?(n(),i("button",{key:0,onClick:m=>S(a.id),class:"bg-red-500 text-white px-1 py-2 rounded hover:bg-red-600"}," ðŸ—‘ Retirer de cette liste ",8,we)):p("",!0)])])]))),128))])])])])]),_.value?(n(),z(P,{key:0,listId:y.value,activeConnections:k.value,sharedContacts:O.value,ownerId:(d=y.value)==null?void 0:d.owner_id,currentUserId:M.value,onClose:E,onShared:Q},null,8,["listId","activeConnections","sharedContacts","ownerId","currentUserId"])):p("",!0)]}),_:1}))}};export{ze as default};
