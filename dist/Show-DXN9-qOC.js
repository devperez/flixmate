import{A as q}from"./AuthenticatedLayout-CauRYshs.js";import{k as m,p as E,o as t,f as o,b as s,F as _,s as L,t as x,d as A,i as D,q as P,B as j,l as M,h as S,a as p,u as $,w as y,m as F,g as f,c as K,P as O}from"./app-D0toaANz.js";import{_ as T}from"./ShareListModal-OcraSFRi.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-HoWSwzf9.js";/* empty css            */const G={class:"chat-container"},H={class:"messages"},J={__name:"Chat",props:{listId:{type:Number,required:!0}},setup(a){const l=a,h=m([]),r=m(""),d=async()=>{try{const n=await M.get(`/lists/${l.listId}/chat/messages`);h.value=n.data}catch(n){console.error("Erreur lors de la récupération des messages:",n)}},v=async()=>{if(r.value.trim())try{await M.post(`/lists/${l.listId}/chat`,{message:r.value,listId:l.listId}),r.value="",d()}catch(n){console.error("Erreur lors de l'envoi du message:",n)}};return E(()=>{d()}),(n,g)=>(t(),o("div",G,[s("div",H,[(t(!0),o(_,null,L(h.value,c=>(t(),o("div",{key:c.id,class:"message"},[s("strong",null,x(c.user.name)+":",1),A(" "+x(c.message),1)]))),128))]),D(s("textarea",{"onUpdate:modelValue":g[0]||(g[0]=c=>r.value=c),onKeyup:j(v,["enter"]),placeholder:"Écrire un message"},null,544),[[P,r.value]]),s("button",{class:"mt-2",onClick:v},"Envoyer")]))}},Q=z(J,[["__scopeId","data-v-514c1116"]]),R={class:"py-12"},W={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},X={class:"flex justify-end"},Y={key:0,class:"flex flex-col md:flex-row gap-4"},Z={class:"w-full md:w-3/4"},ee={class:"mx-4 text-2xl font-bold mb-4"},te={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},se=["src"],ae={class:"text-lg font-semibold"},oe={key:1,class:"text-gray-500"},re={class:"py-12"},me={__name:"Show",props:{list:{Object,required:!0}},setup(a){const l=m(!1),h=m([]),r=m([]),d=m(null),v=a,n=S(()=>v.list.owner_id===d.value),g=S(()=>r.value.map(e=>e.id)),c=()=>{l.value=!0},B=()=>{l.value=!1},N=()=>{alert("Liste partagée avec succès!"),w()},U=async()=>{try{const e=await axios.get(route("contacts.connections"));h.value=e.data.activeConnections.map(u=>u.connected_user)}catch(e){console.error("Erreur lors de la récupération des connexions:",e)}},w=async()=>{try{const e=await axios.get(route("lists.sharedContacts",{listId:v.list.id}));r.value=e.data.sharedContacts}catch(e){console.error("Erreur lors de la récupération des contacts partagés:",e)}},V=async()=>{try{const e=await axios.get(route("current-user"));d.value=e.data.id}catch(e){console.error("Erreur lors de la récupération de l'ID de l'utilisateur actuel:",e)}};return E(()=>{U(),w(),V()}),(e,u)=>(t(),o(_,null,[p($(F),{title:"Liste"}),p(q,null,{header:y(()=>u[1]||(u[1]=[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," List details ",-1)])),default:y(()=>{var C,b,I;return[s("div",R,[s("div",W,[s("div",X,[n.value?(t(),o("button",{key:0,onClick:u[0]||(u[0]=i=>c(e.index)),class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Partager la liste ")):f("",!0)]),a.list?(t(),o("div",Y,[s("div",Z,[s("h1",ee,x(a.list.name),1),a.list.items&&a.list.items.length>0?(t(),o("div",te,[(t(!0),o(_,null,L(a.list.items,i=>(t(),o("div",{key:i.id,class:"border rounded-lg shadow-md p-4 text-center"},[p($(O),{href:e.route("tv.details",{id:i.movie.tmdb_id,type:i.movie.metadata})},{default:y(()=>{var k;return[i.movie?(t(),o("img",{key:0,src:"https://image.tmdb.org/t/p/w500"+i.movie.poster_path,alt:"Affiche du film",class:"w-full h-auto rounded-lg shadow mb-4"},null,8,se)):f("",!0),s("p",ae,x((k=i.movie)==null?void 0:k.title),1)]}),_:2},1032,["href"])]))),128))])):(t(),o("p",oe,"Cette liste est vide."))]),s("div",re,[p(Q,{class:"w-full md:w-3/4","list-id":(C=a.list)==null?void 0:C.id},null,8,["list-id"])])])):f("",!0)])]),l.value?(t(),K(T,{key:0,listId:(b=a.list)==null?void 0:b.id,activeConnections:h.value,sharedContacts:g.value,ownerId:(I=a.list)==null?void 0:I.owner_id,currentUserId:d.value,onClose:B,onShared:N},null,8,["listId","activeConnections","sharedContacts","ownerId","currentUserId"])):f("",!0)]}),_:1})],64))}};export{me as default};
